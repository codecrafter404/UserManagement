-
  requestFilter: 'mainRequest.isPackage("Neos.Neos") && isPackage("Sandstorm.UserManagement")'
  options:
    layoutRootPaths: ['resource://Sandstorm.UserManagement/Private/Layouts/Neos']
###
#
# All controller actions are overwritten here to have minimal change on the controller logic, therefore achive backwards compatibilty with legacy fusion templates
#
###


# Login related actions
-
  requestFilter: 'isPackage("Sandstorm.UserManagement") && isController("Login") && isAction("login")'
  viewObjectName: 'Neos\Fusion\View\FusionView'
  options:
    fusionPathPatterns:
      - resource://Neos.Fusion/Private/Fusion/Root.fusion
      - resource://Neos.Fusion.Form/Private/Fusion/Root.fusion
      - resource://Sandstorm.UserManagement/Private/Fusion/Root.fusion
    fusionPath: loginSite
-
  requestFilter: 'isPackage("Sandstorm.UserManagement") && isController("Login") && isAction("authenticate")'
  viewObjectName: 'Neos\Fusion\View\FusionView'
  options:
    fusionPathPatterns:
      - resource://Neos.Fusion/Private/Fusion/Root.fusion
      - resource://Neos.Fusion.Form/Private/Fusion/Root.fusion
      - resource://Sandstorm.UserManagement/Private/Fusion/Root.fusion
    fusionPath: authenticationSite

# Registration related actions
-
  requestFilter: 'isPackage("Sandstorm.UserManagement") && isController("Registration") && isAction("index")'
  viewObjectName: 'Neos\Fusion\View\FusionView'
  options:
    fusionPathPatterns:
      - resource://Neos.Fusion/Private/Fusion/Root.fusion
      - resource://Neos.Fusion.Form/Private/Fusion/Root.fusion
      - resource://Sandstorm.UserManagement/Private/Fusion/Root.fusion
    fusionPath: registrationIndexSite
-
  requestFilter: 'isPackage("Sandstorm.UserManagement") && isController("Registration") && isAction("register")'
  viewObjectName: 'Neos\Fusion\View\FusionView'
  options:
    fusionPathPatterns:
      - resource://Neos.Fusion/Private/Fusion/Root.fusion
      - resource://Neos.Fusion.Form/Private/Fusion/Root.fusion
      - resource://Sandstorm.UserManagement/Private/Fusion/Root.fusion
    fusionPath: registrationSubmitSite
-
  requestFilter: 'isPackage("Sandstorm.UserManagement") && isController("Registration") && isAction("activateAccount")'
  viewObjectName: 'Neos\Fusion\View\FusionView'
  options:
    fusionPathPatterns:
      - resource://Neos.Fusion/Private/Fusion/Root.fusion
      - resource://Neos.Fusion.Form/Private/Fusion/Root.fusion
      - resource://Sandstorm.UserManagement/Private/Fusion/Root.fusion
    fusionPath: registrationActivateAccountSite
# Password Reset related actions
-
  requestFilter: 'isPackage("Sandstorm.UserManagement") && isController("ResetPassword") && isAction("index")'
  viewObjectName: 'Neos\Fusion\View\FusionView'
  options:
    fusionPathPatterns:
      - resource://Neos.Fusion/Private/Fusion/Root.fusion
      - resource://Neos.Fusion.Form/Private/Fusion/Root.fusion
      - resource://Sandstorm.UserManagement/Private/Fusion/Root.fusion
    fusionPath: resetPasswordIndexSite
-
  requestFilter: 'isPackage("Sandstorm.UserManagement") && isController("ResetPassword") && isAction("insertNewPassword")'
  viewObjectName: 'Neos\Fusion\View\FusionView'
  options:
    fusionPathPatterns:
      - resource://Neos.Fusion/Private/Fusion/Root.fusion
      - resource://Neos.Fusion.Form/Private/Fusion/Root.fusion
      - resource://Sandstorm.UserManagement/Private/Fusion/Root.fusion
    fusionPath: resetPasswordSetPasswordSite
-
  requestFilter: 'isPackage("Sandstorm.UserManagement") && isController("ResetPassword") && isAction("requestToken")'
  viewObjectName: 'Neos\Fusion\View\FusionView'
  options:
    fusionPathPatterns:
      - resource://Neos.Fusion/Private/Fusion/Root.fusion
      - resource://Neos.Fusion.Form/Private/Fusion/Root.fusion
      - resource://Sandstorm.UserManagement/Private/Fusion/Root.fusion
    fusionPath: resetPasswordEmailSentSite
-
  requestFilter: 'isPackage("Sandstorm.UserManagement") && isController("ResetPassword") && isAction("updatePassword")'
  viewObjectName: 'Neos\Fusion\View\FusionView'
  options:
    fusionPathPatterns:
      - resource://Neos.Fusion/Private/Fusion/Root.fusion
      - resource://Neos.Fusion.Form/Private/Fusion/Root.fusion
      - resource://Sandstorm.UserManagement/Private/Fusion/Root.fusion
    fusionPath: resetPasswordSuccessfulSite
